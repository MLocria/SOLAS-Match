<polymer-element name="project-alter-form" css="resources/bootstrap/css/bootstrap.min.css resources/css/solas.css">
  <template>
    <div class="page-header">
      <h1>
        <span style="height: auto; width: 750px; overflow-wrap: break-word; display: inline-block;">
          {{project.title}}
          <small>{{localisation.getTranslation("project_alter_alter_project_details_here")}}</small>
        </span>
        <div class="pull-right">
          <a href="{{projectViewLink}}" class="pull-right btn btn-primary">
            <i class="icon-list icon-white"></i> {{localisation.getTranslation("project_alter_view_project_details")}}
          </a>
        </div>
      </h1>
    </div>
    
    <!-- div containing the form -->
    <div class="well">
      <template if="{{titleError != null || descriptionError != null || wordCountError != null || 
                deadlineError != null || impactError != null ||
                tagsError != null || referenceError != null || imageError != null}}">
        <div id="error-box-top" class="alert alert-error pull-left">
          <h3>{{localisation.getTranslation("common_please_correct_errors")}}:</h3>
          <ol>
            <template if="{{titleError != null}}">
              <li id="title_error_top">{{titleError}}</li>
            </template>
            <template if="{{descriptionError != null}}">
              <li id="description_error_top">{{descriptionError}}</li>
            </template>
            <template if="{{wordCountError != null}}">
              <li id="word_count_error_top">{{wordCountError}}</li>
            </template>
            <template if="{{deadlineError != null}}">
              <li id="deadline_error_top">{{deadlineError}}</li>
            </template>
            <template if="{{tagsError != null}}">
              <li id="tags_error_top">{{tagsError}}</li>
            </template>
            <template if="{{impactError != null}}">
              <li id="impact_error_top">{{impactError}}</li>
            </template>
            <template if="{{referenceError != null}}">
              <li id="reference_error_top">{{referenceError}}</li>
            </template>
            <template if="{{imageError != null}}">
              <li id="image_error_top">{{imageError}}</li>
            </template>
          </ol>
        </div>
      </template>
      <table width="100%">
        <tr align="center">
          <td>
            <label for="title" style="font-size: large"><strong>{{localisation.getTranslation("common_title")}}</strong><span style="color: red">*</span></label>
            <textarea wrap="soft" cols="1" rows="4" value="{{project.title}}" style="width: 400px; margin-bottom: 40px">{{project.title}}</textarea>

            <label for="description" style="font-size: large"><strong>{{localisation.getTranslation("common_description")}}</strong><span style="color: red">*</span></label>
            <textarea wrap="soft" cols="1" rows="6" value="{{project.description}}" style="width: 400px; margin-bottom: 40px">{{project.description}}</textarea>
            
            <label for="impact" style="font-size: large"><strong>{{localisation.getTranslation("common_impact")}}</strong><span style="color: red">*</span></label>
            <textarea wrap="soft" cols="1" rows="4" value="{{project.impact}}" style="width: 400px; margin-bottom: 40px">{{project.impact}}</textarea>
            <!-- {if $isAdmin} -->
               <label for="word-count" style="font-size: large"><strong>{{localisation.getTranslation("common_word_count")}}</strong><span style="color: red">*</span></label>
               <input id="word-count" name="word-count" maxlength="6" value="{{wordCountInput}}" style="width: 400px;  margin-bottom: 20px">
            <!-- {/if} -->
          </td>
          <td>
            <label for="tags" style="font-size: large"><strong>{{localisation.getTranslation("common_tags")}}</strong></label>
            <input id="tags" name="tags" value="{{projectTags}}" style="width: 400px;  margin-bottom: 20px"/>
  
            <div class="projFormInput">
              <div style="margin-bottom:25px;">
                <h2>{{localisation.getTranslation("common_deadline")}}: <span style="color: red">*</span></h2>
                <p class="desc">{{localisation.getTranslation("project_create_7")}}</p>
                <p>
                  {{localisation.getTranslation("common_day")}}:
                  <select selectedIndex="{{selectedDay}}" style="width: 3.5em">
                    <option template repeat="{{day in days}}">{{day}}</option>
                  </select>
                    {{localisation.getTranslation("common_month")}}:
                  <select selectedIndex="{{selectedMonth}}" style="width: 7.3em">
                    <option template repeat="{{month in months}}">{{month}}</option>
                  </select>
                    {{localisation.getTranslation("common_year")}}:
                  <select selectedIndex="{{selectedYear}}" style="width: 4.5em">
                    <option template repeat="{{year in years}}">{{year}}</option>
                  </select>
                </p>
                  {{localisation.getTranslation("common_hour")}}:
                  <select selectedIndex="{{selectedHour}}" style="width: 3.5em">
                    <option template repeat="{{hour in hours}}">{{hour}}</option>
                  </select>
                  {{localisation.getTranslation("common_minute")}}:
                  <select selectedIndex="{{selectedMinute}}" style="width: 3.5em">
                    <option template repeat="{{minute in minutes}}">{{minute}}</option>
                  </select>
              </div>
            </div>
            <p style="margin-bottom:20px;"/>
  
  
            <div id="sourceLanguageDiv"></div>
            <p style="margin-bottom:20px;"/>
            
            <div style="margin-bottom:20px;">
              <label for="proj-image" style="font-size: large"><strong>{{localisation.getTranslation("common_project_image")}}</strong></label>
              <div id="proj-image-display">   
                <template if="{{project.imageUploaded  && project.imageApproved}}">
                  <img class="project-image" src="{{imgSource}}"/>
                </template>
                <template if="{{project.imageUploaded && !project.imageApproved}}">
                      {{localisation.getTranslation("common_project_image_not_approved")}}
                </template>
                <template if="{{!project.imageUploaded && !project.imageApproved}}">
                      {{localisation.getTranslation("common_project_image_not_uploaded")}}
                </template>
              </div>
              <div>
                  <input type="file" id="projectImageFile"/>
                  <p id="help-block"></p>
              </div>
              <button class="btn btn-danger" on-click="{{deleteImage}}">
                <i class="icon-fire icon-white"></i>{{localisation.getTranslation("project_alter_delete_project_image")}}
              </button>
            </div>
            <label for="reference" style="font-size: large"><strong>{{localisation.getTranslation("common_reference")}}</strong></label>
            <textarea wrap="soft" cols="1" rows="4" value="{{project.reference}}" style="width: 400px">{{project.reference}}</textarea>
          </td>
        </tr>
        <tr>
          <td colspan="2">
              <hr/>
          </td>
        </tr>
        <template if="{{titleError != null || descriptionError != null || wordCountError != null || 
                        deadlineError != null || impactError != null || tagsError != null ||
                        referenceError != null || imageError != null}}">
          <div id="error-box-btm" class="alert alert-error pull-left">       
              <h3>{{localisation.getTranslation("common_please_correct_errors")}}:</h3>
              <ol>
                <template if="{{titleError != null}}">
                  <li id="title_error_btm">{{titleError}}</li>
                </template>
                <template if="{{descriptionError != null}}">
                  <li id="description_error_btm">{{descriptionError}}</li>
                </template>
                <template if="{{createProjectError != null}}">
                  <li id="create_project_error_top">{{createProjectError}}</li>
                </template>
                <template if="{{wordCountError != null}}">
                  <li id="word_count_error_btm">{{wordCountError}}</li>
                </template>
                <template if="{{deadlineError != null}}">
                  <li id="deadline_error_btm">{{deadlineError}}</li>
                </template>
                <template if="{{tagsError != null}}">
                  <li id="tags_error_btm">{{tagsError}}</li>
                </template>
                <template if="{{impactError != null}}">
                  <li id="impact_error_btm">{{impactError}}</li>
                </template>
                <template if="{{referenceError != null}}">
                  <li id="reference_error_btm">{{referenceError}}</li>
                </template>
                <template if="{{imageError != null}}">
                  <li id="image_error_btm">{{imageError}}</li>
                </template>
              </ol>
          </div>
        </template>
        <tr align="center">
          <td>
              <p style="margin-bottom:20px;"/>  
              <a href="{{orgDashboardLink}}" class="btn btn-danger">
                <i class="icon-ban-circle icon-white"></i> {{localisation.getTranslation("common_cancel")}}
              </a>
              <p style="margin-bottom:20px;"/>  
          </td>
          <td>
              <p style="margin-bottom:20px;"/>  
              <button on-click="{{submitForm}}" class="btn btn-primary">
                  <i class="icon-refresh icon-white"></i> {{localisation.getTranslation("project_alter_update_project_details")}}
              </button> 
              <p style="margin-bottom:20px;"/>  
          </td>
        </tr>
        </table>
    </div>    
  </template>
  <script type="application/dart" src="ProjectAlterForm.dart"></script>
</polymer-element>